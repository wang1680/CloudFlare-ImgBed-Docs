# æ‰‹åŠ¨éƒ¨ç½²

å¦‚æœCloudflareçš„**æœ‰é™è®¿é—®æ¬¡æ•°**ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œå¹¶ä¸”ä½ æ‹¥æœ‰è‡ªå·±çš„æœåŠ¡å™¨ï¼Œå¯ä»¥å‚ç…§æœ¬èŠ‚çš„æ•™ç¨‹åœ¨æœåŠ¡å™¨ä¸Šæ¨¡æ‹ŸCloudflareçš„ç¯å¢ƒï¼Œå¹¶å¼€æ”¾å¯¹åº”çš„ç«¯å£è®¿é—®æœåŠ¡ã€‚

::: warning æ³¨æ„
ç”±äºæœåŠ¡å™¨æ“ä½œç³»ç»Ÿã€ç¡¬ä»¶ç‰ˆæœ¬å¤æ‚å¤šæ ·ï¼Œç›¸å…³æ•™ç¨‹**æ— æ³•ç¡®ä¿é€‚åˆæ¯ä¸€ä½ç”¨æˆ·**ï¼Œé‡åˆ°æŠ¥é”™è¯·å°½é‡åˆ©ç”¨æœç´¢å¼•æ“è§£å†³ï¼Œæ— æ³•è§£å†³ä¹Ÿå¯ä»¥æissueå¯»æ±‚å¸®åŠ©ã€‚
:::

## ğŸ“‚ å‰ç½®è¦æ±‚

- æ‹¥æœ‰ä¸€å°å¯ä»¥æ­£å¸¸è®¿é—®çš„Linux/WindowsæœåŠ¡å™¨
- æœåŠ¡å™¨å·²å®‰è£…Node.jsç¯å¢ƒï¼ˆæ¨èv22.5.1ç‰ˆæœ¬ï¼‰
- å…·å¤‡åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œèƒ½åŠ›

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. å®‰è£…Node.js

å®‰è£…æœåŠ¡å™¨æ“ä½œç³»ç»Ÿå¯¹åº”çš„`node.js`ï¼Œç»æµ‹è¯•`v22.5.1`ç‰ˆæœ¬å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚


### 2. è·å–é¡¹ç›®ä»£ç 

```bash
# å…‹éš†é¡¹ç›®ä»“åº“
git clone https://github.com/MarSeventh/CloudFlare-ImgBed.git
cd CloudFlare-ImgBed
```

### 3. å®‰è£…ä¾èµ–

åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œè¿è¡Œ`npm install`ï¼Œå®‰è£…æ‰€éœ€ä¾èµ–ï¼š

```bash
npm install
```

### 4. åˆ›å»ºé…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º`wrangler.toml`é…ç½®æ–‡ä»¶ï¼Œå…¶å†…å®¹ä¸ºé¡¹ç›®åç§°ï¼Œç¯å¢ƒå˜é‡ç­‰ã€‚

```toml
name = "cloudflare-imgbed"
compatibility_date = "2024-07-24"

# å¦‚æœéœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ 
# [vars]
# AUTH_CODE = "your_auth_code"
# TG_BOT_TOKEN = "your_bot_token"
# TG_CHAT_ID = "your_chat_id"
```

è¯¦æƒ…å‚è§å®˜æ–¹æ–‡æ¡£ï¼š[Configuration - Wrangler (cloudflare.com)](https://developers.cloudflare.com/workers/wrangler/configuration/)

### 5. å¯åŠ¨æœåŠ¡

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ`npm run start`ï¼š

```bash
npm run start
```

æ­£å¸¸å¯åŠ¨åï¼Œæ§åˆ¶å°è¾“å‡ºç±»ä¼¼å¦‚ä¸‹å†…å®¹ï¼š

```
â” Starting local server...
â” Using namespace binding img_url
â” Using R2 binding img_r2
âœ… Ready on http://localhost:8080
```

![æœåŠ¡å¯åŠ¨æˆåŠŸ](/images/deployment/manual-console.png)

è‡³æ­¤ï¼Œæ­£å¸¸æƒ…å†µä¸‹é¡¹ç›®å·²ç»æˆåŠŸéƒ¨ç½²ã€‚ç¨‹åºé»˜è®¤è¿è¡Œåœ¨`8080`ç«¯å£ä¸Šã€‚


## âš™ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ç«¯å£

å¦‚éœ€ä¿®æ”¹ç«¯å£ï¼Œå¯åœ¨`package.json`ä¸­ä¿®æ”¹`start`è„šæœ¬çš„`port`å‚æ•°ï¼š

```json
"scripts": {
    "ci-test": "concurrently --kill-others \"npm start\" \"wait-on http://localhost:8080 && mocha\"",
    "test": "mocha",
    "start": "npx wrangler pages dev ./ --kv \"img_url\" --r2 \"img_r2\" --port 8080 --persist-to ./data"
}
```

å°†`--port 8080`ä¿®æ”¹ä¸ºä½ æƒ³è¦çš„ç«¯å£å·ã€‚


### æŒä¹…åŒ–æ•°æ®

æ•°æ®å°†è‡ªåŠ¨ä¿å­˜åœ¨é¡¹ç›®ç›®å½•ä¸‹çš„`./data`æ–‡ä»¶å¤¹ä¸­ï¼Œç¡®ä¿è¯¥ç›®å½•æœ‰è¶³å¤Ÿçš„è¯»å†™æƒé™ã€‚

## ğŸš€ ä¸‹ä¸€æ­¥

è‡³æ­¤é¡¹ç›®å·²é€šè¿‡æ‰‹åŠ¨æ–¹å¼å®Œæˆéƒ¨ç½²ï¼Œé»˜è®¤æ”¯æŒ Cloudflare R2 å­˜å‚¨æ¸ é“ï¼Œæ·»åŠ å…¶ä»–å­˜å‚¨æ¸ é“å’Œè¿›è¡Œå…¶ä»–è®¾ç½®çš„æ–¹å¼è¯·å‚è€ƒ [é…ç½®è¯´æ˜](/deployment/configuration#ğŸ—‚%EF%B8%8F-å­˜å‚¨æ¸ é“é…ç½®)ã€‚